<!DOCTYPE html>
<html
    xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
    lang="ko"
>
    <head>
        <meta charset="UTF-8" />
        <title>회원가입 • 실습 프로젝트</title>
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1"
        />
        <!-- 캐시 무력화 -->
        <link
            rel="stylesheet"
            th:href="@{/css/main.css(v=${#dates.createNow().time})}"
        />
    </head>
    <body>
        <header class="topbar">
            <div>
                <div class="brand">
                    <!-- 아이콘 제거, 텍스트만 -->
                    <span>실습 프로젝트</span>
                </div>
                <!-- 상단 로그인 링크 제거 -->
            </div>
        </header>

        <main
            class="card"
            style="max-width: 440px"
        >
            <h1>회원가입</h1>
            <p class="hint">아이디와 비밀번호를 입력해 계정을 생성하세요.</p>

            <!-- 결과/오류 메시지 -->
            <div th:if="${param.error}">
                <p
                    class="error"
                    th:switch="${param.error}"
                >
                    <span th:case="'duplicate'">이미 사용 중인 아이디입니다.</span>
                    <span th:case="'invalid'">아이디/비밀번호 형식을 확인해 주세요.</span>
                    <span th:case="'server'">서버 오류가 발생했습니다. 잠시 후 다시 시도해 주세요.</span>
                    <span th:case="*">요청 처리에 실패했습니다.</span>
                </p>
            </div>

            <form
                th:action="@{/signup}"
                method="post"
                autocomplete="off"
            >
                <!-- CSRF -->
                <input
                    type="hidden"
                    th:name="${_csrf.parameterName}"
                    th:value="${_csrf.token}"
                />

                <label>아이디</label>
                <input
                    type="text"
                    name="username"
                    placeholder="영문/숫자/밑줄, 3~60자"
                    required
                    minlength="3"
                    maxlength="60"
                    pattern="[A-Za-z0-9_]{3,60}"
                />

                <label>비밀번호</label>
                <input
                    type="password"
                    name="password"
                    placeholder="4자 이상"
                    required
                    minlength="4"
                    maxlength="60"
                />

                <div style="margin-top: 14px">
                    <button
                        type="submit"
                        class="btn-primary"
                    >
                        가입하기
                    </button>
                </div>
            </form>

            <!-- 하단에만 로그인 링크 유지 -->
            <p
                class="hint"
                style="margin-top: 12px"
            >
                이미 계정이 있나요? <a th:href="@{/login}">로그인</a>
            </p>
        </main>
    </body>
</html>
