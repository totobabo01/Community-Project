<!-- /db-users.html -->
<div style="background: #fff; border-radius: 16px; box-shadow: 0 10px 30px rgba(31, 38, 135, 0.08); padding: 18px">
    <div style="background: #fbfdff; border: 1px solid #edf0f5; border-radius: 12px; padding: 18px">
        <div class="section-header">
            <div class="section-title">
                <span class="dot"></span>
                <h2 style="margin: 0">DB ÏÇ¨Ïö©Ïûê Í¥ÄÎ¶¨</h2>
            </div>

            <!-- Í¥ÄÎ¶¨ÏûêÎßå ÏÉÅÎã® Î≤ÑÌäº ÎÖ∏Ï∂ú -->
            <div
                class="actions"
                ng-if="isAdmin"
            >
                <button
                    class="btn btn-ghost"
                    ng-click="loadUsers()"
                    ng-disabled="userStatusType==='info'"
                >
                    ÏÉàÎ°ú Í≥†Ïπ®
                </button>
                <button
                    class="btn btn-primary"
                    ng-click="goToNew()"
                >
                    Ïó¨Îü¨ Î™Ö Ï∂îÍ∞Ä
                </button>
            </div>
        </div>

        <!-- ÏïàÎÇ¥/ÏÉÅÌÉú -->
        <div
            class="status-box"
            ng-if="userStatusMessage"
            ng-class="{
           'status-success': userStatusType==='success',
           'status-error'  : userStatusType==='error',
           'status-info'   : userStatusType==='info'
         }"
        >
            {{ userStatusMessage }}
        </div>

        <!-- ÎπÑÍ¥ÄÎ¶¨Ïûê ÏïàÎÇ¥ -->
        <div
            class="status-box status-info"
            ng-if="!isAdmin"
        >
            üôè Ïù¥ ÌéòÏù¥ÏßÄÎäî <strong>Í¥ÄÎ¶¨Ïûê Ï†ÑÏö©</strong>ÏûÖÎãàÎã§.
        </div>

        <!-- Í¥ÄÎ¶¨Ïûê Ï†ÑÏö© ÌÖåÏù¥Î∏î -->
        <div ng-if="isAdmin">
            <table
                class="user-table"
                aria-label="ÏÇ¨Ïö©Ïûê Î™©Î°ù"
            >
                <thead>
                    <tr>
                        <th style="width: 22%">ÏÇ¨Ïö©Ïûê</th>
                        <th style="width: 22%">Ïù¥Î©îÏùº</th>
                        <th style="width: 16%">Ï†ÑÌôî</th>
                        <th style="width: 16%">Í∂åÌïú</th>
                        <th style="width: 24%">ÏûëÏóÖ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="u in users">
                        <td>
                            <span ng-if="!u._editing">{{ u.name }}</span>
                            <input
                                ng-if="u._editing"
                                class="inline-input"
                                type="text"
                                ng-model="u._editName"
                            />
                        </td>
                        <td>
                            <span ng-if="!u._editing">{{ u.email }}</span>
                            <input
                                ng-if="u._editing"
                                class="inline-input"
                                type="email"
                                ng-model="u._editEmail"
                            />
                        </td>
                        <td>
                            <span ng-if="!u._editing">{{ u.phone || '-' }}</span>
                            <input
                                ng-if="u._editing"
                                class="inline-input"
                                type="text"
                                ng-model="u._editPhone"
                            />
                        </td>
                        <td>
                            <span
                                class="pill"
                                ng-class="u._isAdmin ? 'green' : 'gray'"
                            >
                                {{ u.roleLabel }}
                            </span>
                        </td>
                        <td>
                            <div ng-if="!u._editing">
                                <button
                                    class="btn btn-ghost"
                                    ng-click="startEdit(u)"
                                >
                                    ÏàòÏ†ï
                                </button>
                                <button
                                    class="btn btn-danger"
                                    ng-click="deleteUser(u)"
                                >
                                    ÏÇ≠Ï†ú
                                </button>
                            </div>
                            <div ng-if="u._editing">
                                <button
                                    class="btn btn-primary"
                                    ng-click="saveEdit(u)"
                                >
                                    Ï†ÄÏû•
                                </button>
                                <button
                                    class="btn btn-ghost"
                                    ng-click="cancelEdit(u)"
                                >
                                    Ï∑®ÏÜå
                                </button>
                            </div>
                        </td>
                    </tr>

                    <tr ng-if="!users.length && isAdmin">
                        <td
                            colspan="5"
                            style="text-align: center; color: #666"
                        >
                            ÌëúÏãúÌï† Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
